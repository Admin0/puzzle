<section class="question">
  <div class="title">
    다음 조각을 맞춰 <strong>정사각형을</strong> 만들어라.
  </div>
  <div class="q_list">
    <table class="no-border box">
      <tr>
        <td class="all white">①</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td class="all dark"></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td class="all white"></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td class="all dark"></td>
        <td class="all white"></td>
        <td class="all dark"></td>
        <td class="all white"></td>
        <td class="all dark"></td>
      </tr>
    </table>
    <table class="box no-border">
      <tr>
        <td class="all white">②</td>
        <td class="all dark"></td>
        <td class="all white"></td>
      </tr>
      <tr>
        <td class="all dark"></td>
        <td class="all white"></td>
        <td class="all dark"></td>
      </tr>
      <tr>
        <td class="all white"></td>
        <td class="all dark"></td>
        <td class="all white"></td>
      </tr>
      <tr>
        <td class="all dark"></td>
        <td class="all white"></td>
        <td></td>
      </tr>
    </table>
    <table class="box no-border">
      <tr>
        <td class="all dark"></td>
        <td class="all white">③</td>
      </tr>
      <tr>
        <td></td>
        <td class="all dark"></td>
      </tr>
      <tr>
        <td></td>
        <td class="all white"></td>
      </tr>
      <tr>
        <td></td>
        <td class="all dark"></td>
      </tr>
    </table>
    <table class="box no-border">
      <tr>
        <td></td>
        <td class="all dark"></td>
        <td class="all white">④</td>
      </tr>
      <tr>
        <td></td>
        <td class="all white"></td>
        <td class="all dark"></td>
      </tr>
      <tr>
        <td class="all white"></td>
        <td class="all dark"></td>
        <td class="all white"></td>
      </tr>
      <tr>
        <td class="all dark"></td>
        <td class="all white"></td>
        <td class="all dark"></td>
      </tr>
    </table>
    <table class="no-border box">
      <tr>
        <td class="all dark"></td>
        <td class="all white">⑤</td>
        <td class="all dark"></td>
        <td class="all white"></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td class="all dark"></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td class="all white"></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td class="all dark"></td>
      </tr>
    </table>
    <table class="box no-border">
      <tr>
        <td class="all dark"></td>
        <td class="all white">⑥</td>
        <td class="all dark"></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td class="all white"></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td class="all dark"></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td class="all white"></td>
      </tr>
    </table>
    <table class="box no-border">
      <tr>
        <td class="all white">⑦</td>
        <td class="all dark"></td>
        <td class="all white"></td>
        <td class="all dark"></td>
      </tr>
      <tr>
        <td class="all dark"></td>
        <td class="all white"></td>
        <td class="all dark"></td>
        <td class="all white"></td>
      </tr>
    </table>
    <table class="box no-border">
      <tr>
        <td class="all white">⑧</td>
        <td class="all dark"></td>
        <td class="all white"></td>
      </tr>
      <tr>
        <td class="all dark"></td>
        <td class="all white"></td>
        <td></td>
      </tr>
      <tr>
        <td class="all white"></td>
        <td class="all dark"></td>
        <td></td>
      </tr>
      <tr>
        <td class="all dark"></td>
        <td class="all white"></td>
        <td></td>
      </tr>
    </table>
  </div>

</section>
<section class="answer input">
  <input type="text" name="" value="" placeholder="정답 입력" size="12" id="input_answer">
  <button class="key" onclick="answer_check();">확인</button>
  <div class="subtitle">zA7EC4MgfyuFZ3qC</div>
</section>
<section class="answer output hide">

  <table class="box no-border center">
    <tr>
      <td class="all dark"></td>
      <td class="all white"></td>
      <td class="all dark"></td>
      <td class="all white"><span>⑥</span></td>
      <td class="all dark"></td>
      <td class="all white"><span>②</span></td>
      <td class="all dark"></td>
      <td class="all white"></td>
    </tr>
    <tr>
      <td class="all white"></td>
      <td class="all dark"></td>
      <td class="all white"></td>
      <td class="all dark"></td>
      <td class="all white"></td>
      <td class="all dark"></td>
      <td class="all white"></td>
      <td class="all dark"></td>
    </tr>
    <tr>
      <td class="all dark"></td>
      <td class="all white"></td>
      <td class="all dark"></td>
      <td class="all white"><span class=" cw">④</span></td>
      <td class="all dark"></td>
      <td class="all white"></td>
      <td class="all dark"></td>
      <td class="all white"></td>
    </tr>
    <tr>
      <td class="all  white"></td>
      <td class="all dark"></td>
      <td class="all  white"></td>
      <td class="all dark"></td>
      <td class="all white"></td>
      <td class="all dark"></td>
      <td class="all  white"></td>
      <td class="all dark"></td>
    </tr>
    <tr>
      <td class="all dark"></td>
      <td class="all white"></td>
      <td class="all dark"></td>
      <td class="all white">⑦</td>
      <td class="all dark"></td>
      <td class="all white"></td>
      <td class="all dark"></td>
      <td class="all white"></td>
    </tr>
    <tr>
      <td class="all white"><span class="ccw">⑤</span></td>
      <td class="all dark"></td>
      <td class="all  white"></td>
      <td class="all dark"></td>
      <td class="all  white"></td>
      <td class="all dark"></td>
      <td class="all  white"></td>
      <td class="all dark"></td>
    </tr>
    <tr>
      <td class="all dark"></td>
      <td class="all  white"></td>
      <td class="all dark"></td>
      <td class="all white"><span class="ccw">③</span></td>
      <td class="all dark"></td>
      <td class="all  white"></td>
      <td class="all dark"></td>
      <td class="all  white"></td>
    </tr>
    <tr>
      <td class="all  white"></td>
      <td class="all dark"></td>
      <td class="all white"><span class="r180">⑧</span></td>
      <td class="all dark"></td>
      <td class="all white"><span class="ccw">①</span></td>
      <td class="all dark"></td>
      <td class="all  white"></td>
      <td class="all dark"></td>
    </tr>
  </table>
</section>
<script type="text/javascript">
  var list_answer = ["zA7EC4MgfyuFZ3qC", "0"];
</script>
<style media="screen">
  td.dark {
    background: #000;
  }

  table {
    display: inline-block;
  }
  td.white{  background: #fff;}
</style>

<script type="text/javascript">
  var draggable = $('table'); //element

  draggable.on('mousedown', function(e) {
    var dr = $(this).addClass("drag").css("cursor", "move");
    height = dr.outerHeight();
    width = dr.outerWidth();
    max_left = dr.parent().offset().left + dr.parent().width() - dr.width();
    max_top = dr.parent().offset().top + dr.parent().height() - dr.height();
    min_left = dr.parent().offset().left;
    min_top = dr.parent().offset().top;

    ypos = dr.offset().top + height - e.pageY,
      xpos = dr.offset().left + width - e.pageX;
    $(document.body).on('mousemove', function(e) {
      var itop = e.pageY + ypos - height;
      var ileft = e.pageX + xpos - width;

      if (dr.hasClass("drag")) {
        if (itop <= min_top) {
          itop = min_top;
        }
        if (ileft <= min_left) {
          ileft = min_left;
        }
        if (itop >= max_top) {
          itop = max_top;
        }
        if (ileft >= max_left) {
          ileft = max_left;
        }
        dr.offset({
          top: itop,
          left: ileft
        });
      }
    }).on('mouseup', function(e) {
      dr.removeClass("drag");
    });
  });

  draggable.dblclick(function() {
    console.log($(this).hasClass("r90"));
    if ($(this).hasClass("r90")) {
      $(this).removeClass("r90");
      $(this).addClass("r180");
    } else if ($(this).hasClass("r180")) {
      $(this).removeClass("r180");
      $(this).addClass("r270");
    } else if ($(this).hasClass("r270")) {
      $(this).removeClass("r270");
    } else {
      $(this).addClass("r90");
    }
  });
</script>
